<!-- Order Completed Content -->
<div id="completed-orders-list" class="space-y-2 pt-4">
  {% for order in completed_cancelled %}
    <div class="order-item-cc flex flex-col space-y-2 px-4 py-2 border border-green-900 bg-gray-300 opacity-80 select-none rounded-lg shadow-sm cursor-pointer relative" data-order-id="{{ order.order_id }}">
      <span class="absolute top-2 left-1 transform -translate-x-1/2 -translate-y-1/2 flex items-center justify-center text-white rounded-full font-semibold w-8 h-8 text-xs
          {% if order.status == 'COMPLETED' %}bg-green-600 {% else %}bg-red-700{% endif %}">/</span>
      <div class="flex items-center justify-between mt-6">
        <span id="service-selected-cc" class="font-medium text-lg">{{ order.service.name }}</span>
        <span id="deadline-cc" class="text-sm 
            {% if order.status == 'COMPLETED' %}text-green-600 {% else %}text-red-700{% endif %}">
            {{ order.completed_or_cancelled }}
        </span>
      </div>
      <div class="flex items-center justify-between">
        <div class="flex-1 flex items-center space-x-2">
          <i class="fas fa-user text-blue-900"></i>
          <span id="customer-name-cc" class="font-medium">{{ order.customer.name }}</span>
        </div>
        <div class="basis-[35%] flex items-center space-x-2">
          <i class="fas fa-clock text-yellow-500"></i>
          <span id="order-status-cc" class="text-sm">{{ order.status }}</span>
        </div>
      </div>
      <!-- hidden div to get other data to not use an ajax and view for this shit  -->
      <span id="jobs-specifications-cc" class="hidden">{{order.job_specifications}}</span>
      <span id="date-created-cc" class="hidden">{{order.created_at}}</span>
    </div>
  {% empty %}
    <p>No completed Orders found.</p>
  {% endfor %}
</div>

<!-- Add a new class for pagination controls -->
<div class="my-4 cc-pagination-controls w-full bg-gray-50 sticky top-0 flex justify-center items-center">
  <div class="text-base flex items-center space-x-4">
    {% if completed_cancelled.has_previous %}
      <a href="{% url 'get_paginated_orders' %}?page_cc=1" class="text-green-700 flex items-center hover:underline">First</a>
      <a href="{% url 'get_paginated_orders' %}?page_cc={{ completed_cancelled.previous_page_number }}" class="text-green-700 flex items-center hover:underline">Previous</a>
    {% else %}
      <span class="text-gray-400 flex items-center">First</span>
      <span class="text-gray-400 flex items-center">Previous</span>
    {% endif %}

    <span class="mx-4 text-gray-600 font-medium">Page {{ completed_cancelled.number }}/{{ completed_cancelled.paginator.num_pages }}</span>

    {% if completed_cancelled.has_next %}
      <a href="{% url 'get_paginated_orders' %}?page_cc={{ completed_cancelled.next_page_number }}" class="text-green-700 flex items-center hover:underline">Next</a>
      <a href="{% url 'get_paginated_orders' %}?page_cc={{ completed_cancelled.paginator.num_pages }}" class="text-green-700 flex items-center hover:underline">Last</a>
    {% else %}
      <span class="text-gray-400 flex items-center">Next</span>
      <span class="text-gray-400 flex items-center">Last</span>
    {% endif %}
  </div>
</div>

{% comment %} Modal to Display Order Details {% endcomment %}
{% include 'includes/orders_modal.html' with modal="cc"%}

<script>
  $(document).ready(function () {
      $('.cc-pagination-controls').on('click', 'a', function (event) {
          event.preventDefault(); // Prevent default navigation behavior
  
          const url = $(this).attr('href'); // Get the href attribute of the clicked link
  
          $.ajax({
              url: url,
              type: 'GET',
              headers: { 'X-Requested-With': 'XMLHttpRequest' },
              success: function (data) {
                  if (data.html) {
                      $('#completed-orders').html(data.html); // Update the orders container
                  }
              },
              error: function (xhr, status, error) {
                  console.error('Error fetching pagination data:', error);
              }
          });
      });
  });
</script>